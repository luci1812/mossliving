<!-- /snippets/newsletter-form.liquid -->
{% comment %}
  {% render 'newsletter-form', unique: unique, text: block.settings.button_text, style: block.settings.button_style, color: block.settings.button_color %}
{% endcomment %}

{%- liquid 
  assign style = style | default: 'btn'
  assign color = color | default: 'btn--secondary'
  assign translation = 'general.newsletter_form.submit' | t 
  assign text = text | default: translation
 
-%}

<div class="email__content">
  {% if content != blank %}
    {{ content }}
  {% endif %}

<form id="email_signup-footer" class="klaviyo_styling klaviyo_gdpr_embed_XDTQht form__klaviyo" action="//manage.kmail-lists.com/subscriptions/subscribe" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" method="GET" target="_blank" novalidate="novalidate">
    <input type="hidden" name="g" value="XDTQht">
    <input type="hidden" name="$fields" value="$consent">
    <input type="hidden" name="$list_fields" value="$consent">
    <div class="klaviyo_field_group">
      <input class="input-group-field" class="" type="email" value="" name="email" id="k_id_email" placeholder="{{ 'general.newsletter_form.newsletter_email' | t }}" />
    </div>
    <div class="klaviyo_messages">
    <div class="success_message" style="display:none;"></div>
    <div class="error_message" style="display:none;"></div>
    </div>
    <div class="klaviyo_form_actions">
    <button aria-label="{{ text }}" type="submit" class="klaviyo_submit_button button js-submit-button {% unless show_icon %}{{ style }} {{ color }} uppercase{% endunless %}">
      {%- if show_icon -%}
          {%- render 'icon-arrow-right-long' -%}
          {%- render 'icon-check-slim' -%}
        {%- else -%}  
          {{ text }}
        {%- endif -%}
    </button>
    </div>
</form>

</div>

 <!-- Klaviyo -->
<script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js">
</script>
<script type="text/javascript">
  KlaviyoSubscribe.attachToForms('#email_signup-footer', {
    hide_form_on_success: true,
    extra_properties: {
      $source: '$embed',
      $method_type: "Klaviyo Form",
      $method_id: 'embed',
      $consent_version: 'Embed default text'
    }
  });
</script>


